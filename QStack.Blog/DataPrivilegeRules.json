// 涉及三个部分：数据，数据规则，授权主体
//数据：此系统中指实体对象，
//数据规则：数据的过滤条件，最终转化为查询表达式来对实体对象进行过滤
//授权主体:本系统中只针对用户和角色进行数据授权

//过滤属性可分为实体属性 Reference,ICollection,ValueType+ EnvType(上下文环境变量，如登陆用户id,角色id,组织id，客户端类型等)

//业务员只能看自己数据 entity=>entity.createUserId=={loginUser.Id}
//业务部主管能看该部门所有数据：entity=>entity.User.GroupId=={loginUser.GroupId}
//销售经理|财务主管|总经理|可以查看所有业务部数据：entity=>[loginUser.RoleIds] contains(role_销售经理) or contains(role_财务主管) or contains(role_总经理)
//
//public enum Operators
//       {
//           None = 0,
//           Equal = 1,
//           GreaterThan = 2,
//           GreaterThanOrEqual = 3,
//           LessThan = 4,
//           LessThanOrEqual = 5,
//           Contains = 6,
//           StartWith = 7,
//           EndWidth = 8,
//           Range = 9,
 //          In=10
//       }
{
  "rules": {
    "combineType": "or",
    "filters": [
      {
        "combineType": "and",
        "filters": [
          {
            "PropertyName": "FieldName1", //对应实体属性名
            "PropertyKind": "ValueType", //此处应该是一个枚举
            "PropertyType": "string", //此处是clrtype,应该从实体的元信息自动生成
            "FilterValue": [ "aaa" ], //需要过滤的值
            "OperateType": "Contains" //此处应该是一个枚举
          },
          {
            "PropertyName": "FieldName2", //对应实体属性名
            "PropertyKind": "ValueType", //此处应该是一个枚举
            "PropertyType": "datetime", //此处是clrtype,应该从实体的元信息自动生成
            "FilterValue": [ "6-01", "6-02" ], //需要过滤的值,范围值默认min值在前，max值在后
            "OperateType": "Range" //此处应该是一个枚举
          }
        ]
      },
      {
        "PropertyName": "FieldName3", //对应实体属性名
        "PropertyKind": "Reference", //此处应该是一个枚举
        "PropertyType": "User", //此处是clrtype,应该从实体的元信息自动生成
        "Children": [
          {
            "PropertyName": "FieldName3_FieldName1", //对应实体属性名
            "PropertyKind": "ValueType", //此处应该是一个枚举
            "PropertyType": "int", //此处是clrtype,应该从实体的元信息自动生成
            "FilterValue": [ "2" ], //需要过滤的值
            "OperateType": "GreaterThan" //此处应该是一个枚举
          },
          {
            "PropertyName": "FieldName3_FieldName1", //对应实体属性名
            "PropertyKind": "ValueType", //此处应该是一个枚举
            "PropertyType": "int", //此处是clrtype,应该从实体的元信息自动生成
            "FilterValue": [ "2" ], //需要过滤的值
            "OperateType": "GreaterThan" //此处应该是一个枚举
          }
        ]

      },
      {
        "PropertyName": "FieldName4", //对应实体属性名
        "PropertyKind": "ICollection", //此处应该是一个枚举
        "PropertyType": "Role", //此处是clrtype,应该从实体的元信息自动生成
        "Children": [
          {
            "PropertyName": "FieldName3_FieldName1", //对应实体属性名
            "PropertyKind": "ValueType", //此处应该是一个枚举
            "PropertyType": "int", //此处是clrtype,应该从实体的元信息自动生成
            "FilterValue": "2", //需要过滤的值
            "OperateType": "GreaterThan" //此处应该是一个枚举
          },
          {
            "PropertyName": "FieldName3_FieldName1", //对应实体属性名
            "PropertyKind": "ValueType", //此处应该是一个枚举
            "PropertyType": "int", //此处是clrtype,应该从实体的元信息自动生成
            "FilterValue": "2", //需要过滤的值
            "OperateType": "GreaterThan" //此处应该是一个枚举
          }
        ]

      }
    ]
  }
}
